<!-- Terms & Conditions Modal Template -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title fw-bold" id="termsLabel">
                    <i class="fas fa-leaf me-2"></i>Terms & Conditions
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4" id="termsContent" style="max-height: 65vh; overflow-y: auto;">
                <div class="terms-content">
                    <h6 class="text-success fw-bold mt-3 mb-2">1. INTRODUCTION</h6>
                    <p>Welcome to OliveOshoppe. These Terms and Conditions govern your use of our website and services. By accessing and using this website, you accept and agree to be bound by the terms and provision of this agreement.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">2. USE LICENSE</h6>
                    <p>Permission is granted to temporarily download one copy of the materials (information or software) from OliveOshoppe for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:</p>
                    <ul>
                        <li>Modifying or copying the materials</li>
                        <li>Using the materials for any commercial purpose or for any public display</li>
                        <li>Attempting to decompile or reverse engineer any software contained on OliveOshoppe</li>
                        <li>Removing any copyright or other proprietary notations from the materials</li>
                        <li>Transferring the materials to another person or "mirroring" the materials on any other server</li>
                    </ul>

                    <h6 class="text-success fw-bold mt-3 mb-2">3. DISCLAIMER</h6>
                    <p>The materials on OliveOshoppe are provided on an 'as is' basis. OliveOshoppe makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">4. LIMITATIONS</h6>
                    <p>In no event shall OliveOshoppe or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on OliveOshoppe, even if OliveOshoppe or an OliveOshoppe authorized representative has been notified orally or in writing of the possibility of such damage.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">5. ACCURACY OF MATERIALS</h6>
                    <p>The materials appearing on OliveOshoppe could include technical, typographical, or photographic errors. OliveOshoppe does not warrant that any of the materials on OliveOshoppe are accurate, complete, or current. OliveOshoppe may make changes to the materials contained on OliveOshoppe at any time without notice.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">6. LINKS</h6>
                    <p>OliveOshoppe has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by OliveOshoppe of the site. Use of any such linked website is at the user's own risk.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">7. MODIFICATIONS</h6>
                    <p>OliveOshoppe may revise these Terms and Conditions for OliveOshoppe at any time without notice. By using this website, you are agreeing to be bound by the then current version of these Terms and Conditions.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">8. GOVERNING LAW</h6>
                    <p>These Terms and Conditions and any separate agreements we may enter into to provide the Services are governed by and construed in accordance with the laws of the Philippines, and you irrevocably submit to the exclusive jurisdiction of the courts in that location.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">9. CONTACT INFORMATION</h6>
                    <p>If you have any questions about these Terms and Conditions, please contact us at support@oliveoshoppe.com</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">10. PRIVACY POLICY</h6>
                    <p>Your use of OliveOshoppe is also governed by our Privacy Policy. Please review our Privacy Policy, which also governs our website and informs users of our data collection practices.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">11. USER RESPONSIBILITIES</h6>
                    <p>As a user of OliveOshoppe, you agree to provide accurate and complete information during registration and maintain the confidentiality of your account credentials. You are responsible for all activities under your account.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">12. PRODUCT INFORMATION</h6>
                    <p>We strive to provide accurate descriptions and pricing for all products. However, we do not warrant that product descriptions, pricing, or other content on OliveOshoppe is accurate, complete, or error-free. If you find any discrepancies, please contact us immediately.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">13. PAYMENT & ORDERS</h6>
                    <p>All orders are subject to acceptance and confirmation. OliveOshoppe reserves the right to refuse or cancel any order at any time. Payment must be received and verified before order processing.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">14. SHIPPING & DELIVERY</h6>
                    <p>We will make reasonable efforts to deliver orders within the estimated timeframe. However, delivery times are estimates only and we are not liable for delays caused by third-party carriers or unforeseen circumstances.</p>

                    <h6 class="text-success fw-bold mt-3 mb-2">15. RETURNS & REFUNDS</h6>
                    <p>Please refer to our Return Policy for information regarding returns, exchanges, and refunds. Contact customer support for assistance with any return requests.</p>

                    <div class="alert alert-success mt-4 mb-0" role="alert">
                        <i class="fas fa-check-circle me-2"></i>
                        <strong>By clicking "I Agree,"</strong> you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Cancel
                </button>
                <button type="button" class="btn btn-success fw-bold" id="agreeBtn">
                    <i class="fas fa-check me-2"></i>I Agree to Terms & Conditions
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    #termsModal .modal-content {
        border: none;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        border-radius: 15px;
    }

    #termsModal .modal-header {
        background: linear-gradient(135deg, #2c5530 0%, #3d7a44 100%) !important;
        border: none;
        border-radius: 15px 15px 0 0;
    }

    #termsModal .modal-body {
        background-color: #fafbfc;
        padding: 2rem !important;
    }

    #termsModal .modal-body::-webkit-scrollbar {
        width: 10px;
    }

    #termsModal .modal-body::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    #termsModal .modal-body::-webkit-scrollbar-thumb {
        background: #2c5530;
        border-radius: 5px;
    }

    #termsModal .modal-body::-webkit-scrollbar-thumb:hover {
        background: #3d7a44;
    }

    .terms-content h6 {
        font-size: 1rem;
        letter-spacing: 0.5px;
    }

    .terms-content p {
        font-size: 0.95rem;
        line-height: 1.6;
        color: #555;
        text-align: justify;
    }

    .terms-content ul {
        padding-left: 1.5rem;
    }

    .terms-content li {
        margin-bottom: 0.5rem;
        color: #555;
    }

    #termsModal .modal-footer {
        border-top: 1px solid #e0e0e0;
        border-radius: 0 0 15px 15px;
        padding: 1rem 2rem;
    }

    #agreeBtn {
        background: linear-gradient(135deg, #2c5530 0%, #3d7a44 100%);
        border: none;
        padding: 0.6rem 2rem;
        font-size: 1rem;
    }

    #agreeBtn:hover {
        background: linear-gradient(135deg, #1e3f21 0%, #2a5f34 100%);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(44, 85, 48, 0.4);
    }

    #agreeBtn:active {
        transform: translateY(0);
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const termsModal = document.getElementById('termsModal');
    const agreeBtn = document.getElementById('agreeBtn');
    const termsContent = document.getElementById('termsContent');
    const termsLink = document.getElementById('termsLink');
    const termsLinkLogin = document.getElementById('termsLinkLogin');
    const termsCheck = document.getElementById('terms_check');
    const termsCheckLogin = document.getElementById('terms_check_login');

    // Open terms modal from registration
    if (termsLink) {
        termsLink.addEventListener('click', function(e) {
            e.preventDefault();
            // Scroll to top when modal opens
            const modal = new bootstrap.Modal(termsModal);
            modal.show();
            // Ensure scroll is at top
            setTimeout(() => {
                termsContent.scrollTop = 0;
            }, 100);
        });
    }

    // Open terms modal from login
    if (termsLinkLogin) {
        termsLinkLogin.addEventListener('click', function(e) {
            e.preventDefault();
            const modal = new bootstrap.Modal(termsModal);
            modal.show();
            // Ensure scroll is at top
            setTimeout(() => {
                termsContent.scrollTop = 0;
            }, 100);
        });
    }

    // Handle agree button click
    if (agreeBtn) {
        agreeBtn.addEventListener('click', function() {
            console.log('Agree button clicked');
            
            // Set the appropriate checkbox based on what's available
            let checkedOne = false;
            
            if (termsCheck) {
                termsCheck.checked = true;
                checkedOne = true;
                console.log('Set termsCheck to true');
            }
            
            if (termsCheckLogin) {
                termsCheckLogin.checked = true;
                checkedOne = true;
                console.log('Set termsCheckLogin to true');
            }
            
            // Hide the modal
            if (termsModal && checkedOne) {
                const modalInstance = bootstrap.Modal.getInstance(termsModal);
                if (modalInstance) {
                    modalInstance.hide();
                } else {
                    // If no instance exists, create and hide
                    new bootstrap.Modal(termsModal).hide();
                }
                console.log('Modal hidden');
                
                // Trigger form validation update
                window.dispatchEvent(new Event('termsAccepted'));
            }
        });
    }

    // Reset modal when it's hidden
    if (termsModal) {
        termsModal.addEventListener('hidden.bs.modal', function() {
            termsContent.scrollTop = 0;
        });
    }
});
</script>
